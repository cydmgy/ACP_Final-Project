{% extends "base.html" %}

{% block content %}
<div class="profile-container">
    <h2>Your Profile</h2>
    
    <div class="profile-layout">
        <!-- Left: Profile Info -->
        <div class="profile-card">
            <div class="avatar-display">
            <img 
                src="{{ url_for('static', filename='avatars/' ~ user.avatar) }}"
                alt="Avatar"
                class="avatar-image">
            </img>   
            </div>
            <h3>{{ user.username }}</h3>
            <p class="user-bio">{{ user.bio }}</p>
            <p class="member-since">Member since: {{ user.created_at.strftime('%b %Y') }}</p>
        </div>

        <!-- Right: Stats and Edit Form -->
        <div class="profile-right">
            <!-- Stats Section -->
            <div class="stats-section">
                <h3>Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-box">
                        <span class="stat-label">Total Clicks</span>
                        <span class="stat-value">{{ "{:,}".format(user.clicks) }}</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-label">Time Spent</span>
                        <span class="stat-value">{{ (user.time_spent // 3600)|int }}h {{ ((user.time_spent % 3600) // 60)|int }}m</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-label">Total Pulls</span>
                        <span class="stat-value">{{ "{:,}".format(user.pulls) }}</span>
                    </div>
                </div>
            </div>

            <!-- Achievements Section -->
            <div class="achievements-section">
                <h3>Collection Progress</h3>
                <div class="achievement-list">
                    <div class="achievement-item {% if user.clicks >= 20000 %}completed{% endif %}">
                        <span class="achievement-icon">ðŸŽ°</span>
                        <div class="achievement-info">
                            <strong>Master Clicker</strong>
                            <p>Complete 20,000 clicks ({{ "{:,}".format(user.clicks) }}/20,000)</p>
                        </div>
                    </div>
                    <div class="achievement-item {% if legendary_count >= 150 %}completed{% endif %}">
                        <span class="achievement-icon">ðŸ‘‘</span>
                        <div class="achievement-info">
                            <strong>Legendary Collector</strong>
                            <p>Collect 150 legendary creatures ({{ legendary_count }}/150)</p>
                        </div>
                    </div>
                    <div class="achievement-item {% if completed_missions >= 50 %}completed{% endif %}">
                        <span class="achievement-icon">ðŸŽ¯</span>
                        <div class="achievement-info">
                            <strong>Mission Legend</strong>
                            <p>Complete 50 missions ({{ completed_missions }}/50)</p>
                        </div>
                    </div>
                    <div class="achievement-item {% if epic_count >= 75 %}completed{% endif %}">
                        <span class="achievement-icon">ðŸ’Ž</span>
                        <div class="achievement-info">
                            <strong>Epic Hoarder</strong>
                            <p>Collect 75 epic creatures ({{ epic_count }}/75)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Edit Profile Form -->
            <div class="edit-profile-section">
                <h3>Edit Profile</h3>
                <form method="POST" action="{{ url_for('profile') }}">
                    {{ form.hidden_tag() }}
                    
                    <div class="form-group">
                        {{ form.avatar.label }}
                        {{ form.avatar(class="form-control") }}
                    </div>
                    
                    <div class="form-group">
                        {{ form.bio.label }}
                        {{ form.bio(class="form-control", rows="3") }}
                    </div>
                    
                    {{ form.submit(class="btn btn-primary ocean-button") }}
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}