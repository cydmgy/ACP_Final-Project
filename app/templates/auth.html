{% extends "base.html" %}

{% block content %}
<div class="auth-container" style="max-width: 400px; margin: 50px auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px;">
    
    <div id="login-section">
        <h2>Log In</h2>
        <form action="{{ url_for('auth.login') }}" method="POST">
            {{ login_form.hidden_tag() }} <!-- Security Token -->
            <div style="margin-bottom: 10px;">
                {{ login_form.username(placeholder="Username", style="width: 100%; padding: 8px;", autocomplete="off") }}
            </div>
            <div style="margin-bottom: 10px;">
                {{ login_form.password(placeholder="Password", style="width: 100%; padding: 8px;", autocomplete="off") }}
            </div>
            {{ login_form.submit(class="ocean-button", style="width: 100%;") }}
        </form>
        <p style="margin-top: 15px;">
            <a href="#" onclick="showSection('forgot-section')">Forgot Password?</a><br>
            Don't have an account? <a href="#" onclick="showSection('register-section')">Create Account</a>
        </p>
    </div>

    <div id="register-section" style="display: none;">
        <h2>Create Account</h2>
        <form action="{{ url_for('auth.register') }}" method="POST">
            {{ register_form.hidden_tag() }}
            <div style="margin-bottom: 10px;">
                {{ register_form.username(placeholder="Choose Username", style="width: 100%; padding: 8px;", autocomplete="off") }}
            </div>
            <div style="margin-bottom: 10px;">
                {{ register_form.password(placeholder="Choose Password", style="width: 100%; padding: 8px;", autocomplete="off") }}
            </div>
            {{ register_form.submit(class="ocean-button", style="width: 100%;") }}
        </form>
        <p style="margin-top: 15px;">
            Already have an account? <a href="#" onclick="showSection('login-section')">Log In</a>
        </p>
    </div>

    <div id="forgot-section" style="display: none;">
        <h2>Reset Password</h2>
        <form action="{{ url_for('auth.forgot_password') }}" method="POST">
            {{ forgot_form.hidden_tag() }}
            <div style="margin-bottom: 10px;">
                {{ forgot_form.username(placeholder="Username", style="width: 100%; padding: 8px;", autocomplete="off") }}
            </div>
            <div style="margin-bottom: 10px;">
                {{ forgot_form.new_password(placeholder="New Password", style="width: 100%; padding: 8px;", autocomplete="off") }}
            </div>
            {{ forgot_form.submit(class="ocean-button", style="width: 100%;") }}
        </form>
        <p style="margin-top: 15px;">
            <a href="#" onclick="showSection('login-section')">Back to Login</a>
        </p>
    </div>
</div>

<script>
    function showSection(sectionId) {
        document.getElementById('login-section').style.display = 'none';
        document.getElementById('register-section').style.display = 'none';
        document.getElementById('forgot-section').style.display = 'none';
        document.getElementById(sectionId).style.display = 'block';
    }
    document.addEventListener('DOMContentLoaded', function() {
        const initialSection = '{{ initial_section }}';     
        showSection(initialSection + '-section');
    });
</script>
{% endblock %}